{% extends 'shop/base.html' %}{% load static %}{% load i18n %}



{% block meta_title %}{{ product.name }} - {{ product.code }}{% endblock %}
{% block meta_description %}{% trans 'Интерент магазин медицинских товаров' %}{% endblock %}
{% block og_image %}
    <meta property="og:image"     content="https://trimed.com.ua{{ product.get_image }}" />
    <meta property="og:image:url" content="https://trimed.com.ua{{ product.get_image }}" />
{% endblock %}


{% block links %}
   <link rel="stylesheet" type="text/css" href="{% static 'css/shop/ui/forms.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'css/shop/product/product.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'css/shop/product/product__galery.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'css/shop/product/product__descriptions.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'css/shop/product/product__comments.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'lib/swiper/swiper.min.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'lib/photoswipe/photoswipe.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'lib/photoswipe/default-skin/default-skin.css' %}">
{% endblock %}

{% block content %}
    <div class="content">
        {% include 'shop/product/components/breadcrumbs.html' %}
    </div>
    
    <div class="product">
     
            {% include 'shop/product/product__main.html' %}
      
        <!-- DESCRIPTION -->
        <div class="about">
                <input type="radio" name="product_data_block" id="product_data_block_1" class="product_data_block" {% if not page %}checked{% endif %}>
                <input type="radio" name="product_data_block" id="product_data_block_2" class="product_data_block" {% if page == 'characteristics' %}checked{% endif %}>
                <input type="radio" name="product_data_block" id="product_data_block_3" class="product_data_block" {% if page == 'comments' %}checked{% endif %}>
                <input type="radio" name="product_data_block" id="product_data_block_4" class="product_data_block" {% if page == 'questions' %}checked{% endif %}>
                <input type="radio" name="product_data_block" id="product_data_block_5" class="product_data_block" {% if page == 'certificates' %}checked{% endif %}>
                <div class="content navigation">
                    <nav>
                        <ul>
                            <a 
                                href="{% url 'shop:product' product.slug product.pk %}" 
                                data-id="product_data_block_1"
                                class="product_data_block block_1">
                                <li>Все о товаре</li>
                            </a>
                            <a 
                                href="{% url 'shop:product' product.slug product.pk 'characteristics' %}" 
                                data-id="product_data_block_2"
                                class="product_data_block block_2">
                                <li>Характеристики</li>
                            </a>
                            <a 
                                href="{% url 'shop:product' product.slug product.pk 'comments' %}" 
                                data-id="product_data_block_3"
                                class="product_data_block block_3">
                                <li>Отзывы ({{ product.comments.all|length }})</li>
                            </a>
                            <a 
                                href="{% url 'shop:product' product.slug product.pk 'questions' %}" 
                                data-id="product_data_block_4"
                                class="product_data_block block_4">
                                <li>Вопросы ({{ product.questions.all|length }})</li>
                            </a>
                            {% if product.certificates.all|length %}
                                <a 
                                    href="{% url 'shop:product' product.slug product.pk 'certificates' %}" 
                                    data-id="product_data_block_5"
                                    class="product_data_block block_5">
                                    <li>Сертификаты ({{ product.certificates.all|length }})</li>
                                </a>
                            {% endif %}
                        </ul>
                    </nav>
                </div>
                <div class="data">
                    <div class="content">
                        {% include 'shop/product/pages/page__description.html' %}
                        {% include 'shop/product/pages/page__characteristics.html' %}
                        {% include 'shop/product/pages/page__comments.html' %}
                        {% include 'shop/product/pages/page__questions.html' %}
                        {% include 'shop/product/pages/page__certificates.html' %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include 'shop/product/components/photoswipe__root.html' %}
{% endblock %}

{% block js %}
<script src="{% static 'lib/photoswipe/photoswipe.js' %}"></script>
<script src="{% static 'lib/photoswipe/photoswipe-ui-default.js' %}"></script>
<script>
var mySwiper = new Swiper('.galery_slider', {
  loop: true,
  pagination: {
    el: '.swiper-pagination',
  },
  navigation: {
    nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },
  scrollbar: {
    el: '.swiper-scrollbar',
  },
})
</script>
<script src="{% static 'js/shop/photoswipe-init.js' %}"></script>
<script>
    const qunatity = document.querySelector('.product_quantity')
    document.querySelector('.add_to_cart').onclick = () => {
        CartAdd(qunatity)
    }
    dataBlockInputs = document.querySelectorAll('input[name=product_data_block]')
    dataBlockLinks = document.querySelectorAll('a.product_data_block')

    for (let i = 0; i < dataBlockLinks.length; i++) {
        let a = dataBlockLinks[i];
        a.onclick = (e) => {
            e.preventDefault()
            input = document.getElementById(a.dataset.id) 
            input.checked = true;
            window.history.replaceState('','',a.href);
        }
    }
</script>

{% endblock %}